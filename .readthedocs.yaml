version: 2
build:
  os: "ubuntu-22.04"
  tools:
    python: "3.11"
  jobs:
    pre_install:
      - pip install "cython>=3" "numpy>=2"
      - |
        python - <<'PY'
        from Cython.Build import cythonize
        cythonize([
            "src/cassiopeia/preprocess/collapse_cython.pyx",
            "src/cassiopeia/solver/ilp_solver_utilities.pyx",
        ], language_level="3")
        PY
    build:
      html:
        - sphinx-build -b html -T -n -d docs/_build/doctrees docs docs/_build/html

sphinx:
  configuration: docs/conf.py
python:
  install:
    - method: pip
      path: .
      extra_requirements:
      - docs
      - spatial
